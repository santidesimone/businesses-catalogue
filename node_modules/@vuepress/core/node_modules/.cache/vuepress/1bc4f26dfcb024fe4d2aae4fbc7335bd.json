{"remainingRequest":"/Users/santidesimone/clients/me/businesses-catalogue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/santidesimone/clients/me/businesses-catalogue/src/.vuepress/theme/components/Blog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/santidesimone/clients/me/businesses-catalogue/src/.vuepress/theme/components/Blog.vue","mtime":1675460504107},{"path":"/Users/santidesimone/clients/me/businesses-catalogue/node_modules/cache-loader/dist/cjs.js","mtime":1675377198708},{"path":"/Users/santidesimone/clients/me/businesses-catalogue/node_modules/babel-loader/lib/index.js","mtime":1675460524206},{"path":"/Users/santidesimone/clients/me/businesses-catalogue/node_modules/cache-loader/dist/cjs.js","mtime":1675377198708},{"path":"/Users/santidesimone/clients/me/businesses-catalogue/node_modules/vue-loader/lib/index.js","mtime":1675460524855}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQb3N0UHJldmlldyBmcm9tICcuL1Bvc3RQcmV2aWV3JwoKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogeyBQb3N0UHJldmlldyB9LAogICAgcHJvcHM6IHsKICAgICAgICBwYWdlczogewogICAgICAgICAgICB0eXBlOiBBcnJheSwKICAgICAgICAgICAgZGVmYXVsdDogW10KICAgICAgICB9LAogICAgICAgIHBhZ2VTaXplOiB7CiAgICAgICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICAgICAgZGVmYXVsdDogNQogICAgICAgIH0sCiAgICAgICAgc3RhcnRQYWdlOiB7CiAgICAgICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICAgICAgZGVmYXVsdDogMAogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBNYXRoLmNlaWwodGhpcy5zdGFydFBhZ2UgLyB0aGlzLnBhZ2VTaXplKSwKICAgICAgICAgICAgc2VsZWN0ZWRUYWdzOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIGZpbHRlcmVkTGlzdCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMucGFnZXMpIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFnZXMuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQmxvZ1Bvc3QgPSAhIWl0ZW0uZnJvbnRtYXR0ZXIuYmxvZwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUmVhZHlUb1B1Ymxpc2ggPSBuZXcgRGF0ZShpdGVtLmZyb250bWF0dGVyLmRhdGUpIDw9IG5ldyBEYXRlKCkKICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgZm9yIGxvY2FsZXMKICAgICAgICAgICAgICAgICAgICBsZXQgaXNDdXJyZW50TG9jYWxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLiRzaXRlLmxvY2FsZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYWxlUGF0aCA9IHRoaXMuJHJvdXRlLnBhdGguc3BsaXQoJy8nKVsxXSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgaXNDdXJyZW50TG9jYWxlID0gaXRlbS5yZWxhdGl2ZVBhdGguc3RhcnRzV2l0aChsb2NhbGVQYXRoKTsgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGFncyBjb250YWluIGFsbCBvZiB0aGUgc2VsZWN0ZWQgdGFncwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc1RhZ3MgPSAhIWl0ZW0uZnJvbnRtYXR0ZXIudGFncyAmJiB0aGlzLnNlbGVjdGVkVGFncy5ldmVyeSgodGFnKSA9PiBpdGVtLmZyb250bWF0dGVyLnRhZ3MuaW5jbHVkZXModGFnKSkKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0Jsb2dQb3N0IHx8ICFpc1JlYWR5VG9QdWJsaXNoIHx8ICh0aGlzLnNlbGVjdGVkVGFncy5sZW5ndGggPiAwICYmICFoYXNUYWdzKSB8fCAhaXNDdXJyZW50TG9jYWxlKXsgCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuZnJvbnRtYXR0ZXIuZGF0ZSkgLSBuZXcgRGF0ZShhLmZyb250bWF0dGVyLmRhdGUpKQogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgdG90YWxQYWdlcygpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5maWx0ZXJlZExpc3QubGVuZ3RoIC8gdGhpcy5wYWdlU2l6ZSkKICAgICAgICB9LAogICAgfSwKCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAgTWF0aC5taW4oTWF0aC5tYXgodGhpcy5jdXJyZW50UGFnZSwgMCksIHRoaXMudG90YWxQYWdlcyAtIDEpCiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICBuZXh0UGFnZSgpIHsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHRoaXMuY3VycmVudFBhZ2UgPj0gdGhpcy50b3RhbFBhZ2VzIC0gMSA/IHRoaXMudG90YWxQYWdlcyAtIDEgOiB0aGlzLmN1cnJlbnRQYWdlICsgMQogICAgICAgIH0sCiAgICAgICAgcHJldmlvdXNQYWdlKCkgewogICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gdGhpcy5jdXJyZW50UGFnZSA8IDAgPyAwIDogdGhpcy5jdXJyZW50UGFnZSAtIDEKICAgICAgICB9LAogICAgICAgIGFkZFRhZyh0YWcpIHsKICAgICAgICAgICAgY29uc3QgdGFnRXhpc3RzID0gdGhpcy5zZWxlY3RlZFRhZ3Muc29tZShpdGVtID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtID09PSB0YWcKICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIGlmICghdGFnRXhpc3RzKXsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWdzID0gdGhpcy5zZWxlY3RlZFRhZ3MuY29uY2F0KHRhZykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlVGFnKHRhZykgewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFncy5maWx0ZXIodCA9PiB0ICE9IHRhZykKICAgICAgICB9LAogICAgICAgIHJlc2V0VGFncygpewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGFncyA9IFtdCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Blog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Blog.vue","sourceRoot":"src/.vuepress/theme/components","sourcesContent":["<template>\n\t<div class=\"theme-default-content\">  \n    <div \n      v-if=\"selectedTags.length > 0\"\n      class=\"filtered-heading\"\n    >\n      <h2>Filtered by {{ selectedTags.join(',') }}</h2>\n      <button\n        type=\"button\"\n        @click=\"resetTags\"\n        class=\"btn clear-filter-btn\"\n      >\n        Clear filter\n      </button>\n    </div>\n    <ul class=\"blog-list\">\n      <li v-for=\"(item, index) in filteredList\"\n        class=\"blog-list__item\">\n        <PostPreview v-on:add-tag=\"addTag($event)\"\n          v-show=\"index >= currentPage * pageSize && index < (currentPage + 1) * pageSize\"\n          :item=\"item\"\n          v-on:tag-click=\"console.log($event)\"\n        />\n      </li>\n    </ul>\n\n    <div class=\"pagination\">\n      <div>\n        <a href=\"#\"\n          v-show=\"currentPage > 0\" \n          @click=\"previousPage\"\n          class=\"button--pagination\" \n        >\n          Newer Posts\n        </a>\n      </div>\n      <div>\n        <a href=\"#\"\n          v-show=\"currentPage < totalPages - 1\"\n          @click=\"nextPage\"\n          class=\"button--pagination\"\n        >\n          Older Posts\n        </a>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PostPreview from './PostPreview'\n\nexport default {\n    components: { PostPreview },\n    props: {\n        pages: {\n            type: Array,\n            default: []\n        },\n        pageSize: {\n            type: Number,\n            default: 5\n        },\n        startPage: {\n            type: Number,\n            default: 0\n        }\n    },\n    data() {\n        return {\n            currentPage: Math.ceil(this.startPage / this.pageSize),\n            selectedTags: []\n        }\n    },\n    computed: {\n        filteredList() {\n            if (this.pages) {\n                \n                return this.pages.filter(item => {\n                    const isBlogPost = !!item.frontmatter.blog\n                    const isReadyToPublish = new Date(item.frontmatter.date) <= new Date()\n                     // check for locales\n                    let isCurrentLocale = true;\n                    if(this.$site.locales) {\n                        const localePath = this.$route.path.split('/')[1] || \"\";\n                        isCurrentLocale = item.relativePath.startsWith(localePath);   \n                    }\n                    // check if tags contain all of the selected tags\n                    const hasTags = !!item.frontmatter.tags && this.selectedTags.every((tag) => item.frontmatter.tags.includes(tag))\n\n                    if (!isBlogPost || !isReadyToPublish || (this.selectedTags.length > 0 && !hasTags) || !isCurrentLocale){ \n                        return false\n                    }\n\n                    return true\n                    \n                }).sort((a, b) => new Date(b.frontmatter.date) - new Date(a.frontmatter.date))\n            }\n        },\n\n        totalPages() {\n            \n            return Math.ceil(this.filteredList.length / this.pageSize)\n        },\n    },\n\n    mounted() {\n        this.currentPage =  Math.min(Math.max(this.currentPage, 0), this.totalPages - 1)\n    },\n\n    methods: {\n        nextPage() {\n            this.currentPage = this.currentPage >= this.totalPages - 1 ? this.totalPages - 1 : this.currentPage + 1\n        },\n        previousPage() {\n            this.currentPage = this.currentPage < 0 ? 0 : this.currentPage - 1\n        },\n        addTag(tag) {\n            const tagExists = this.selectedTags.some(item => {\n                return item === tag\n            })\n\n            if (!tagExists){\n                this.selectedTags = this.selectedTags.concat(tag)\n            }\n        },\n        removeTag(tag) {\n            this.selectedTags.filter(t => t != tag)\n        },\n        resetTags(){\n            this.selectedTags = []\n        }\n    }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.blog-list\n    padding 0\n    margin 0\n\n.blog-list__item\n    list-style-type none\n\n.blog-list__tags\n    margin-bottom 15px\n\n.button--pagination\n    text-decoration none\n    color lighten($textColor, 25%)\n    &:hover\n        text-decoration none !important\n        border-bottom 2px solid $accentColor\n\n.clear-filter-btn\n    align-self center\n    margin-left 20px\n\n.filtered-heading\n    display flex\n\n.pagination\n    display flex\n    justify-content space-between\n</style>\n"]}]}